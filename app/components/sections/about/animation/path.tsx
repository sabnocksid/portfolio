"use client";

import { useEffect, useRef, useState } from "react";

interface AnimatedSVGProps {
  text?: string;
  duration?: number; 
  width?: number;
  height?: number;
}

export default function AnimatedSVG({
  text = "Sidharth Poudel ~ ",
  duration = 10,
  width = 1083,
  height = 1205,
}: AnimatedSVGProps) {
  const pathRef = useRef<SVGPathElement>(null);
  const textRef = useRef<SVGTextPathElement>(null);
  const [offset, setOffset] = useState(0);

  useEffect(() => {
    let start: number | null = null;

    const animate = (timestamp: number) => {
      if (!start) start = timestamp;
      const progress = (timestamp - start) / 1000; 
      const percent = (progress / duration) * 100; 
      setOffset(percent % 100); 
      requestAnimationFrame(animate);
    };

    requestAnimationFrame(animate);
  }, [duration]);

  return (
    <svg
      width={width}
      height={height}
      viewBox="0 0 1083 1205"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
      className=""
    >
      <path
       id="myPath"
        ref={pathRef}
        d="M50.228 1195.01C35.6074 1137.87 26.0785 1083.66 23.0573 1040.43C20.5147 1004.03 19.1948 995.546 13.0644 976.153C9.85253 965.99 6.25269 952.658 5.06607 946.525C-0.0363605 920.145 1.34357 876.111 8.35659 841.553C14.1203 813.147 31.6529 758.847 41.0204 740.386C42.815 736.85 46.0842 726.629 48.2841 717.673C55.3198 689.04 61.0915 680.435 86.2344 661.094C91.9461 656.7 103.318 647.819 111.503 641.358C130.599 626.285 134.035 624.312 158.406 614.422C189.29 601.888 193.912 599.08 203.71 586.906C214.606 573.366 218.572 570.351 239.337 559.805C255.489 551.603 275.68 539.904 294.33 527.942C298.703 525.137 307.703 520.511 314.329 517.663C320.956 514.816 327.085 511.565 327.949 510.437C328.814 509.311 330.891 502.717 332.565 495.786C335.196 484.881 335.344 483.012 333.658 481.915C332.587 481.217 330.563 480.923 329.161 481.261C327.759 481.599 325.629 481.35 324.428 480.707C322.478 479.666 311.044 461.973 311.044 459.999C311.044 459.565 307.444 452.789 303.045 444.943C298.645 437.096 295.045 429.916 295.045 428.985C295.045 428.056 293.052 424.177 290.616 420.368C288.179 416.558 285.46 410.555 284.573 407.028C283.441 402.519 280.302 397.32 274.005 389.522C251.288 361.39 245.313 343.271 250.367 317.836C251.774 310.755 252.314 304.323 251.751 301.331C251.244 298.633 250.316 291.45 249.687 285.366C248.898 277.719 247.12 270.917 243.93 263.32C241.391 257.278 238.989 250.067 238.59 247.295C238.193 244.522 236.37 238.992 234.542 235.004C231.83 229.088 231.449 226.955 232.466 223.409C233.153 221.019 233.714 216.096 233.714 212.467C233.714 208.839 235.253 200.833 237.133 194.678C239.955 185.437 240.51 181.129 240.317 169.976C239.985 150.887 240.803 143.209 243.45 140.564C246.046 137.972 246.396 135.831 244.225 135.831C243.406 135.831 243.039 134.677 243.409 133.265C244.013 130.958 243.726 130.849 240.563 132.187C238.63 133.004 236.478 134.159 235.781 134.752C235.085 135.345 232.165 135.831 229.292 135.831C224.569 135.831 224.144 135.551 224.837 132.904C225.259 131.295 224.94 129.18 224.129 128.206C222.072 125.729 226.624 121.16 236.256 116.033C246.447 110.609 257.713 101.319 257.713 98.3396C257.713 96.847 259.061 95.5994 261.273 95.0455C264.602 94.2107 264.257 93.8632 255.94 89.6757C250.496 86.9356 247.047 84.3645 247.047 83.049C247.047 80.8774 248.567 80.904 261.713 83.31C263.546 83.6455 261.896 82.4299 258.047 80.6084C252.471 77.9721 251.047 76.6487 251.047 74.1069C251.047 70.1098 253.097 68.4309 259.047 67.5548C263.913 66.8371 281.891 62.2475 289.379 59.8096C291.762 59.0347 293.712 57.5475 293.712 56.5049C293.712 55.4637 294.312 54.6116 295.045 54.6116C295.778 54.6116 296.228 53.862 296.045 52.9473C295.817 51.8075 297.813 51.239 302.378 51.1431C311.643 50.9487 311.538 51.0313 307.764 46.969C301.738 40.4781 302.738 39.9655 321.413 39.9655C334.958 39.9655 339.082 39.5234 341.532 37.8085C343.995 36.0869 345.276 35.9524 347.892 37.1428C352.602 39.2864 355.514 38.9868 357.27 36.1775C358.115 34.826 361.497 32.9673 364.784 32.0486C369.76 30.6572 370.891 29.7305 371.535 26.5163C372.144 23.474 373.025 22.6564 375.693 22.6564C377.555 22.6564 380.12 22.1212 381.393 21.4674C382.666 20.8124 387.007 19.5408 391.041 18.6421C395.074 17.742 399.719 15.7807 401.361 14.2842C405.087 10.8916 412.613 9.69861 445.038 7.36189C458.971 6.35797 473.536 4.8654 477.403 4.04388C482.495 2.96407 487.258 2.94409 494.665 3.97332C503.386 5.18362 505.195 5.09175 506.941 3.34886C508.067 2.2251 509.898 1.69784 511.011 2.17717C516.662 4.60976 531.838 6.68684 534.367 5.37269C535.834 4.61109 540.07 4.21298 543.782 4.48593C553.641 5.21424 558.82 8.31256 568.13 19.0562L573.555 25.3154L575.312 21.6565C577.573 16.9431 585.422 14.1231 590.698 16.1256C595.666 18.0123 598.607 20.7924 603.943 28.648C612.225 40.8416 614.858 44.5963 617.641 48.1873C626.555 59.6898 630.41 71.7822 631.767 92.5037C632.198 99.0639 632.859 104.932 633.238 105.543C633.616 106.155 633.362 107.378 632.671 108.262C631.175 110.176 628.795 116.79 626.425 125.619C624.978 131.011 624.994 132.139 626.531 132.609C632.714 134.497 632.7 134.481 631.842 138.764C631.378 141.086 629.804 144.097 628.347 145.452C625.002 148.564 625.006 150.014 628.363 151.809C629.83 152.593 631.03 153.991 631.03 154.916C631.03 155.842 633.128 157.357 635.692 158.283C638.811 159.41 640.629 161.061 641.185 163.272C642.356 167.933 641.071 168.536 636.92 165.275C634.95 163.726 632.728 162.46 631.986 162.46C631.243 162.46 632.674 163.83 635.166 165.505C637.995 167.407 640.329 170.468 641.381 173.657C642.309 176.466 644.558 180.535 646.381 182.697C648.204 184.861 649.696 188.014 649.696 189.705C649.696 191.396 650.674 195.803 651.869 199.499C653.503 204.552 654.909 206.524 657.535 207.448C659.456 208.123 665.828 210.622 671.695 213C677.561 215.378 686.56 218.527 691.694 219.998C696.827 221.469 701.777 223.279 702.693 224.019C703.682 224.819 704.36 228.529 704.36 233.157C704.36 240.457 704.109 241.078 700.383 243.002C695.808 245.365 692.974 250.161 691.694 257.707C689.76 269.097 683.946 288.514 680.318 295.691C675.864 304.505 670.396 309.537 662.814 311.807L657.385 313.43L658.177 319.497C658.613 322.834 660.154 334.624 661.6 345.695C667.121 387.928 666.617 407.933 659.466 430.571C653.419 449.71 640.089 473.566 623.774 494.441C617.424 502.567 617.102 504.555 620.86 512.477C622.114 515.123 644.078 529.789 673.521 547.644C677.78 550.227 701.069 557.185 710.946 558.825C713.469 559.245 720.491 558.817 726.551 557.876C744.281 555.121 751.024 556.687 795.689 573.931C803.022 576.762 818.021 582.158 829.021 585.922C840.02 589.686 851.47 594.176 854.464 595.9C860.871 599.587 873.668 612.911 881.47 624.018C886.127 630.65 888.99 633.012 899.708 639.069C914.376 647.357 922.176 653.614 925.26 659.563C926.596 662.139 927.764 668.899 928.29 677.091L929.144 690.426L937.346 703.49C941.858 710.675 953.18 731.936 962.508 750.737C971.836 769.538 983.182 791.211 987.723 798.9C1002.2 823.411 1006.57 832.232 1018.38 860.814C1032.79 895.663 1040.24 911.833 1061.64 954.682C1083.2 997.845 1083.6 999.518 1077.88 1022.78C1074.19 1037.76 1072.39 1047.91 1068.21 1077.18C1064.37 1104.1 1046.74 1163.88 1030.81 1204"
        stroke="currentColor" 
        strokeWidth={4}
        fill="none"
      />

      <text fontSize="24" fill="black">
        <textPath
          ref={textRef}
          href="#myPath"
          startOffset={`${offset}%`} 
        >
          {text}
        </textPath>
      </text>
    </svg>
  );
}
